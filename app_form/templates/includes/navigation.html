<!-- Common Navigation Template -->
{% if nav_info %}
<div class="step-indicator">
    {% for step_num in range(1, nav_info.total_steps + 1) %}
        {% if step_num == nav_info.step %}
            <span class="step active">{{ step_num }}. {{ nav_info.current_name }}</span>
        {% else %}
            <span class="step inactive">{{ step_num }}. {{ get_page_name_by_step(step_num) }}</span>
        {% endif %}
    {% endfor %}
</div>

<style>
/* Compact navigation styles (scoped to this include) */
.step-indicator {
    margin: 8px 0 12px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
}
.step-indicator .step {
    font-size: 0.95rem;
    line-height: 1.25;
    padding: 6px 12px;
}
.navigation-buttons {
    margin-top: 8px;
}
.navigation-buttons .btn-prev,
.navigation-buttons .btn-next {
    padding: 8px 14px;
    font-size: 0.95rem;
}
</style>

<!-- Navigation Buttons (shared include) -->
{% include 'includes/navigation_buttons.html' %}

<script>
function goToPreviousStep() {
    try {
        if (typeof getPreviousRouteFromNavInfo === 'function') {
            const prev = getPreviousRouteFromNavInfo();
            if (prev) {
                window.location.href = prev;
                return;
            }
        }
    } catch (e) {}
    const fallbackPrev = '{{ nav_info.previous_route or "" }}';
    if (fallbackPrev) {
        window.location.href = fallbackPrev;
    }
}

function goToNextStep() {
    try {
        if (typeof getNextRouteFromNavInfo === 'function') {
            const next = getNextRouteFromNavInfo();
            if (next) {
                window.location.href = next;
                return;
            }
        }
    } catch (e) {}
    const fallbackNext = '{{ nav_info.next_route or "" }}';
    if (fallbackNext) {
        window.location.href = fallbackNext;
    }
}
</script>
{% endif %}
