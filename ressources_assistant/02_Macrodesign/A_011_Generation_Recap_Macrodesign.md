# G√©n√©ration du r√©capitulatif de Macrodesign

[INSTRUCTION_ASSISTANT] :
- But : G√©n√©rer une fiche compl√®te de macrodesign √† partir :
  - des donn√©es g√©n√©rales valid√©es (prompts 001B ‚Üí 001D),
  - des comp√©tences (001E) et de leur ordre (001F / A_008 ‚Üí `ordre_competences`),
  - des r√©f√©rentiels d‚Äôauto√©valuation par section (001G),
  - du YAML `contenus_sections` produit par A_010B.
- Sorties attendues :
  1) Bloc YAML `macrodesign_generalites`
  2) Bloc YAML `contenus_par_section`
  Les deux blocs doivent √™tre autocoh√©rents et exploitables pour l‚Äôexport.
- R√®gles :
  - Ne pas modifier le contenu valid√© ; seulement assembler et normaliser.
  - Si un champ manque : laisser des crochets `[ ]` (ne pas inventer).
  - Respecter le sc√©nario CMO (8 sections) et la nomenclature A_010B.
- V√©rifications :
  - Concordance comp√©tences ‚Üî sections S2‚ÄìS5.
  - Pr√©sence de l‚Äôintention ‚ÄúAcquisition‚Äù dans S2‚ÄìS5.
  - Pr√©sence du badge standard en S2‚ÄìS5.
- Variables internes : `yaml_generalites`, `yaml_contenus` (concat√©nation finale).
- Affichage apr√®s validation :
  - Afficher ‚Äúüì§ Consignes d‚Äôexport ‚Äî Deux formats au choix‚Äù.
  - Formulation simple : le participant peut
    1) garder un fichier **YAML** pour r√©utiliser plus tard ;
    2) ouvrir deux fichiers **CSV** pour visualiser/√©diter au tableur.
  - Pr√©ciser : ‚ÄúQuand vous commencerez le microdesign, l‚Äôassistant vous proposera d‚Äôint√©grer le fichier YAML si vous l‚Äôavez conserv√©.‚Äù
- Question pr√©alable (avant export) : poser la variable interne `lancer_tutorat_apres_export` avec choix [Oui / Non].
- Apr√®s validation et export du macrodesign, poser la question au participant :  
  ‚ÄúSouhaitez-vous encha√Æner avec un module **optionnel** pour d√©finir votre **plan d‚Äôaccompagnement tutoral** selon la **m√©thode Jacques Rodet** ?‚Äù  
  - **Oui** ‚Üí l‚Äôassistant guidera imm√©diatement le participant pour d√©finir son plan d‚Äôaccompagnement tutoral et produira un export s√©par√© (YAML et/ou CSV) d√©di√© au tutorat.  
  - **Non** ‚Üí passer directement √† la suite (microdesign).  
- Enregistrer la r√©ponse dans la variable interne `lancer_tutorat_apres_export`.  
- Si `lancer_tutorat_apres_export = "Oui"` ‚Üí encha√Æner avec le prompt op√©ratoire `A_012_Tutorat_Anticipation.md` en mode export s√©par√© (pas de fusion YAML).  
- Si `lancer_tutorat_apres_export = "Non"` ‚Üí clore le macrodesign et proposer d‚Äôouvrir le microdesign.  
- Ne jamais afficher le nom du fichier interne au participant ; utiliser uniquement la formulation p√©dagogique ci-dessus.
- Export (logique interne, affichage conditionnel) :
  - Poser la question : ‚ÄúQuel format d‚Äôexport souhaitez-vous ? ‚Äî [Markdown / CSV]‚Äù.
  - Si la r√©ponse contient ‚Äúmarkdown‚Äù (insensible casse/accents) :
    - Afficher UNIQUEMENT l‚Äôexport Markdown tableur strict (Feuille 1 + Feuille 2).
    - Ne PAS afficher la version CSV.
  - Si la r√©ponse contient ‚Äúcsv‚Äù :
    - Afficher UNIQUEMENT les deux blocs CSV (`generalites.csv` et `sections.csv`).
    - Apr√®s l‚Äôexport CSV, proposer le lien suivant :  
      **‚ÄúPour un rendu format√© pr√™t √† imprimer, vous pouvez t√©l√©charger notre mod√®le XLSX ici : [https://nuage02.apps.education.fr/index.php/s/wfDs68aYpokiKrP](https://nuage02.apps.education.fr/index.php/s/wfDs68aYpokiKrP) et y importer vos deux CSV.‚Äù**
    - Ne PAS afficher la version Markdown.
  - Sinon : redemander le choix avec l‚Äôindication ‚Äú[exemples : Markdown / CSV]‚Äù.
  - Rappel : quand le microdesign d√©marrera, proposer au participant d‚Äôint√©grer le fichier YAML s‚Äôil l‚Äôa conserv√©.
...

- TEMPLATES D‚ÄôEXPORT (invisibles pour le participant ‚Äî √† utiliser selon le choix) :

  [TEMPLATE_MARKDOWN_FEUILLE_1]
  | titre_formation | public_type | public_profil | public_niveau | besoins_spec1 | besoins_spec2 | type_parcours | hybridation | temps_total | autonomie | animation | calendrier | horaires | nb_participants |
  | [titre] | [public_type] | [public_profil] | [public_niveau] | [b1] | [b2] | [type_parcours] | asynchrone (majeure) + synchrone (mineure) | moins de 3h | formation tutor√©e | [animation] | [calendrier] | [horaires] | [nb] |

  [TEMPLATE_MARKDOWN_FEUILLE_2]
  | section | titre | competence | intentions | ressource | activite_1 | activite_2 | discussion | badge | modalite |
  | 1 | Bienvenue dans la formation |  | Acquisition | Page d‚Äôaccueil |  |  | Pr√©sentation du parcours, modalit√©s, contacts |  | Asynchrone |
  | 2 | [s2_titre] | [s2_comp] | Acquisition;[s2_int2] | [s2_ress] | [s2_act1] | [s2_act2] | [s2_disc] | R√©ussite si atteinte du degr√© 3 | Asynchrone |
  | 3 | [s3_titre] | [s3_comp] | Acquisition;[s3_int2] | [s3_ress] | [s3_act1] | [s3_act2] | [s3_disc] | R√©ussite si atteinte du degr√© 3 | Asynchrone |
  | 4 | [s4_titre] | [s4_comp] | Acquisition;[s4_int2] | [s4_ress] | [s4_act1] | [s4_act2] | [s4_disc] | R√©ussite si atteinte du degr√© 3 | Asynchrone |
  | 5 | [s5_titre] | [s5_comp] | Acquisition;[s5_int2] | [s5_ress] | [s5_act1] | [s5_act2] | [s5_disc] | R√©ussite si atteinte du degr√© 3 | Asynchrone |
  | 6 | Classe virtuelle ‚Äì mise en pratique |  | Collaboration | Lien vers classe virtuelle (BBB) |  |  |  |  | Synchrone |
  | 7 | Forum g√©n√©ral ‚Äì √©changes libres |  | Discussion;Collaboration |  | Forum |  | Fils issus des discussions des sections S2 √† S5 |  | Asynchrone |
  | 8 | √âvaluation finale et perspectives |  | Enqu√™te | Sondage Magist√®re |  |  | Questionnaire de satisfaction √† 3 temporalit√©s |  | Asynchrone |

  [TEMPLATE_CSV_GENERALITES]
  titre_formation;public_type;public_profil;public_niveau;besoins_spec1;besoins_spec2;type_parcours;hybridation;temps_total;autonomie;animation;calendrier;horaires;nb_participants
  [titre];[public_type];[public_profil];[public_niveau];[b1];[b2];[type_parcours];asynchrone (majeure) + synchrone (mineure);moins de 3h;formation tutor√©e;[animation];[calendrier];[horaires];[nb]

[TEMPLATE_CSV_SECTIONS]
section;titre;competence;intentions;ressource;activite_1;activite_2;discussion;badge;modalite
1;Bienvenue dans la formation;;Acquisition;Page d‚Äôaccueil;;;Pr√©sentation du parcours, modalit√©s, contacts;;Asynchrone
2;[s2_titre];[s2_comp];Acquisition;[s2_int2];[s2_ress];[s2_act1];[s2_act2];[s2_disc];R√©ussite si atteinte du degr√© 3;Asynchrone
3;[s3_titre];[s3_comp];Acquisition;[s3_int2];[s3_ress];[s3_act1];[s3_act2];[s3_disc];R√©ussite si atteinte du degr√© 3;Asynchrone
4;[s4_titre];[s4_comp];Acquisition;[s4_int2];[s4_ress];[s4_act1];[s4_act2];[s4_disc];R√©ussite si atteinte du degr√© 3;Asynchrone
5;[s5_titre];[s5_comp];Acquisition;[s5_int2];[s5_ress];[s5_act1];[s5_act2];[s5_disc];R√©ussite si atteinte du degr√© 3;Asynchrone
6;Classe virtuelle ‚Äì mise en pratique;;Collaboration;Lien vers classe virtuelle (BBB);;;;;Synchrone
7;Forum g√©n√©ral ‚Äì √©changes libres;;Discussion;Collaboration;;Forum;;Fils issus des discussions des sections S2 √† S5;;Asynchrone
8;√âvaluation finale et perspectives;;Enqu√™te;Sondage Magist√®re;;;;Questionnaire de satisfaction √† 3 temporalit√©s;;Asynchrone

---

## üéØ Objectif du prompt (visible formateur)

Assembler automatiquement tout le macrodesign valid√© en **deux blocs YAML pr√™ts √† l‚Äôexport** :
- `macrodesign_generalites`
- `contenus_par_section`

Ces blocs serviront √† produire un **tableur d‚Äôexport** fid√®le au sc√©nario **CMO**.

---

## üßæ √âtape 1 ‚Äî G√©n√©ration des deux blocs YAML

### üì¶ Bloc 1 ‚Äî G√©n√©ralit√©s

```yaml
macrodesign_generalites:
  titre_formation: "[titre valid√©]"
  public_cible:
    type: "[enseignants / formateurs / autres]"
    profil: "[homog√®ne / h√©t√©rog√®ne]"
    niveau_expertise: "[d√©butant / interm√©diaire / avanc√©]"
    besoins_specifiques:
      - "[besoin 1]"
      - "[besoin 2]"
  contraintes_formation:
    type_parcours: "[cr√©ation / migration]"
    hybridation: "asynchrone (majeure) + synchrone (mineure)"
    temps_total: "moins de 3h"
    autonomie: "formation tutor√©e"
    animation: "[individuelle / coanim√©e]"
    calendrier: "[√† pr√©ciser]"
    horaires: "[√† pr√©ciser]"
    nombre_participants: "[valeur]"
  scenario_hybride:
    reference: "CMO"
    structure:
      - Accueil
      - Apprentissage 1
      - Apprentissage 2
      - Apprentissage 3
      - Apprentissage 4
      - Classe virtuelle
      - Forum g√©n√©ral
      - √âvaluation finale
  competences_vis√©es:
    - "[formulation comp√©tence 1]"
    - "[formulation comp√©tence 2]"
    - "[formulation comp√©tence 3]"
    - "[formulation comp√©tence 4]"
  referentiels_auto√©valuation:
    - section: 2
      competence: "[...]"
      badge: "R√©ussite si atteinte du degr√© 3"
    - section: 3
      competence: "[...]"
      badge: "R√©ussite si atteinte du degr√© 3"
    - section: 4
      competence: "[...]"
      badge: "R√©ussite si atteinte du degr√© 3"
    - section: 5
      competence: "[...]"
      badge: "R√©ussite si atteinte du degr√© 3"
~~~

### üì¶ Bloc 2 ‚Äî Contenus par section

```yaml
contenus_par_section:
  - section: 1
    titre: "Bienvenue dans la formation"
    intentions: ["Acquisition"]
    ressource: "Page d‚Äôaccueil"
    activite_1: null
    activite_2: null
    discussion: "Pr√©sentation du parcours, modalit√©s, contacts"
    badge: null
    modalite: "Asynchrone"

  - section: 2
    titre: "[titre section 2]"
    intentions: ["Acquisition", "[intention secondaire 2]"]
    ressource: "[ressource section 2]"
    activite_1: "[activit√© 1 section 2]"
    activite_2: "[activit√© 2 section 2]"
    discussion: "[discussion section 2]"
    badge: "R√©ussite si atteinte du degr√© 3"
    modalite: "Asynchrone"

  - section: 3
    titre: "[titre section 3]"
    intentions: ["Acquisition", "[intention secondaire 3]"]
    ressource: "[ressource section 3]"
    activite_1: "[activit√© 1 section 3]"
    activite_2: "[activit√© 2 section 3]"
    discussion: "[discussion section 3]"
    badge: "R√©ussite si atteinte du degr√© 3"
    modalite: "Asynchrone"

  - section: 4
    titre: "[titre section 4]"
    intentions: ["Acquisition", "[intention secondaire 4]"]
    ressource: "[ressource section 4]"
    activite_1: "[activit√© 1 section 4]"
    activite_2: "[activit√© 2 section 4]"
    discussion: "[discussion section 4]"
    badge: "R√©ussite si atteinte du degr√© 3"
    modalite: "Asynchrone"

  - section: 5
    titre: "[titre section 5]"
    intentions: ["Acquisition", "[intention secondaire 5]"]
    ressource: "[ressource section 5]"
    activite_1: "[activit√© 1 section 5]"
    activite_2: "[activit√© 2 section 5]"
    discussion: "[discussion section 5]"
    badge: "R√©ussite si atteinte du degr√© 3"
    modalite: "Asynchrone"

  - section: 6
    titre: "Classe virtuelle ‚Äì mise en pratique"
    intentions: ["Collaboration"]
    ressource: "Lien vers classe virtuelle (BBB)"
    activite_1: null
    activite_2: null
    discussion: null
    badge: null
    modalite: "Synchrone"

  - section: 7
    titre: "Forum g√©n√©ral ‚Äì √©changes libres"
    intentions: ["Discussion", "Collaboration"]
    ressource: null
    activite_1: "Forum"
    activite_2: null
    discussion: "Fils issus des discussions des sections S2 √† S5"
    badge: null
    modalite: "Asynchrone"

  - section: 8
    titre: "√âvaluation finale et perspectives"
    intentions: ["Enqu√™te"]
    ressource: "Sondage Magist√®re"
    activite_1: null
    activite_2: null
    discussion: "Questionnaire de satisfaction √† 3 temporalit√©s"
    badge: null
    modalite: "Asynchrone"
```

---

## üìù √âtape 2 ‚Äî Validation

Souhaitez-vous **valider** ce macrodesign (les deux blocs YAML ci-dessus) ?  
**R√©ponse : [√† compl√©ter]**

---

## üì§ Consignes d‚Äôexport ‚Äî Deux formats au choix

Vous pouvez r√©cup√©rer votre macrodesign sous deux formes. Choisissez ce qui vous convient (vous pouvez aussi garder les deux) :

### A. Conserver un fichier YAML (pour r√©utiliser plus tard)
- √Ä quoi √ßa sert ?  
  Pour reprendre votre travail plus tard, notamment lors du microdesign.
- Comment faire ?  
  1. Copiez les **deux blocs YAML** affich√©s ci-dessus (entre ```yaml et ```).  
  2. Collez-les dans un fichier texte et enregistrez sous **`macrodesign.yml`**.  
  3. Quand vous **commencerez le microdesign**, l‚Äôassistant vous **proposera d‚Äôint√©grer ce fichier YAML** si vous l‚Äôavez conserv√©.

### B. Voir/√©diter au tableur (CSV)
- √Ä quoi √ßa sert ?  
  Pour une vue ‚Äútableur‚Äù (Excel, LibreOffice Calc, Google Sheets) et de petites corrections.
- Comment faire ?  
  1. R√©cup√©rez les deux blocs CSV fournis par l‚Äôassistant (**`generalites.csv`** et **`sections.csv`**).  
  2. Enregistrez-les tels quels, puis ouvrez-les dans votre tableur (s√©parateur **`;`**, encodage **UTF-8**).
- √Ä noter :  
  Si vous modifiez le CSV et souhaitez ensuite reprendre avec le YAML, l‚Äôassistant pourra **reconvertir vos CSV en YAML**.

---

## Pr√©f√©rence ‚Äî Pr√©parer l‚Äôaccompagnement tutoral apr√®s l‚Äôexport ?

Apr√®s l‚Äôexport du macrodesign, souhaitez-vous encha√Æner avec un module **optionnel** pour d√©finir votre **plan d‚Äôaccompagnement tutoral** selon la **m√©thode Jacques Rodet** ?  
Ce module produira un **export s√©par√©** (YAML et/ou CSV) d√©di√© au tutorat, sans modifier votre macrodesign.

**R√©ponse : [√† compl√©ter]**  (Oui / Non)

- **Oui** ‚Üí l‚Äôassistant vous guidera imm√©diatement pour d√©finir votre plan d‚Äôaccompagnement tutoral (m√©thode Jacques Rodet) et produira un export d√©di√© au tutorat.  
- **Non** ‚Üí vous passerez directement √† la suite (microdesign) sans √©tape tutorat.

> L‚Äôexport du macrodesign se fait d‚Äôabord.  
> Si vous r√©pondez Oui, l‚Äôassistant lancera ensuite la phase tutorat.

---

[INSTRUCTION_ASSISTANT] :  
- Apr√®s validation et export du macrodesign, **poser la question ci-dessus** et enregistrer la r√©ponse dans la variable interne `lancer_tutorat_apres_export`.  
- Si `lancer_tutorat_apres_export = "Oui"` ‚Üí **encha√Æner** avec le prompt op√©ratoire `A_012_Tutorat_Anticipation.md` en **mode export s√©par√©** (pas de fusion YAML).  
- Si `lancer_tutorat_apres_export = "Non"` ‚Üí **clore** le macrodesign et proposer d‚Äôouvrir le microdesign.  
- Ne jamais afficher le nom du fichier interne `A_012_Tutorat_Anticipation.md` au participant ; utiliser uniquement la formulation p√©dagogique indiqu√©e ci-dessus.

---

## üì§ √âtape 3 ‚Äî Export (tableur)

Quel format d‚Äôexport souhaitez-vous ?
- **Markdown (tableur ‚Äúcopier-coller‚Äù)**
- **CSV (Excel / LibreOffice / Google Sheets)**

**R√©ponse : [Markdown / CSV]**

> Apr√®s votre r√©ponse, l‚Äôassistant affichera directement l‚Äôexport correspondant.
